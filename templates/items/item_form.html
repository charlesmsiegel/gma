{% extends "base.html" %}
{% load static %}
{% block title %}{{ page_title }}{% endblock %}
{% block extra_css %}
  <style>
.form-container {
    max-width: 800px;
    margin: 0 auto;
}
.required-field::after {
    content: " *";
    color: #dc3545;
}
  </style>
{% endblock %}
{% block content %}
  <div class="container">
    <!-- Breadcrumb -->
    <nav aria-label="breadcrumb" class="mb-4">
      <ol class="breadcrumb">
        <li class="breadcrumb-item">
          <a href="{% url 'campaigns:detail' slug=campaign.slug %}">{{ campaign.name }}</a>
        </li>
        <li class="breadcrumb-item">
          <a href="{% url 'items:campaign_items' slug=campaign.slug %}">Items</a>
        </li>
        <li class="breadcrumb-item active" aria-current="page">{{ form_action }} Item</li>
      </ol>
    </nav>
    <!-- Page Header -->
    <div class="form-container">
      <div class="card">
        <div class="card-header">
          <h1 class="h3 mb-0">{{ form_action }} Item</h1>
          <p class="text-muted mb-0">{{ campaign.name }}</p>
        </div>
        <div class="card-body">
          <!-- Form -->
          <form method="post" novalidate>
            {% csrf_token %}
            <!-- Form Errors -->
            {% if form.non_field_errors %}
              <div class="alert alert-danger" role="alert">
                {% for error in form.non_field_errors %}<div>{{ error }}</div>{% endfor %}
              </div>
            {% endif %}
            <!-- Basic Information -->
            <fieldset class="mb-4">
              <legend class="h5 border-bottom pb-2 mb-3">Basic Information</legend>
              <!-- Name Field -->
              <div class="mb-3">
                <label for="{{ form.name.id_for_label }}" class="form-label required-field">
                  Item Name
                </label>
                {{ form.name }}
                {% if form.name.help_text %}
                  <div class="form-text">{{ form.name.help_text }}</div>
                {% endif %}
                {% if form.name.errors %}
                  <div class="text-danger">
                    {% for error in form.name.errors %}<small>{{ error }}</small>{% endfor %}
                  </div>
                {% endif %}
              </div>
              <!-- Description Field -->
              <div class="mb-3">
                <label for="{{ form.description.id_for_label }}" class="form-label">Description</label>
                {{ form.description }}
                {% if form.description.help_text %}
                  <div class="form-text">{{ form.description.help_text }}</div>
                {% endif %}
                {% if form.description.errors %}
                  <div class="text-danger">
                    {% for error in form.description.errors %}<small>{{ error }}</small>{% endfor %}
                  </div>
                {% endif %}
              </div>
              <!-- Quantity Field -->
              <div class="mb-3">
                <label for="{{ form.quantity.id_for_label }}"
                       class="form-label required-field">Quantity</label>
                {{ form.quantity }}
                {% if form.quantity.help_text %}
                  <div class="form-text">{{ form.quantity.help_text }}</div>
                {% endif %}
                {% if form.quantity.errors %}
                  <div class="text-danger">
                    {% for error in form.quantity.errors %}<small>{{ error }}</small>{% endfor %}
                  </div>
                {% endif %}
              </div>
            </fieldset>
            <!-- Ownership Information -->
            <fieldset class="mb-4">
              <legend class="h5 border-bottom pb-2 mb-3">Ownership</legend>
              <!-- Owner Field -->
              <div class="mb-3">
                <label for="{{ form.owner.id_for_label }}" class="form-label">Owner</label>
                {{ form.owner }}
                {% if form.owner.help_text %}
                  <div class="form-text">{{ form.owner.help_text }}</div>
                {% endif %}
                {% if form.owner.errors %}
                  <div class="text-danger">
                    {% for error in form.owner.errors %}<small>{{ error }}</small>{% endfor %}
                  </div>
                {% endif %}
              </div>
            </fieldset>
            <!-- Required Fields Notice -->
            <div class="mb-4">
              <small class="text-muted">
                <span class="text-danger">*</span> Required fields
              </small>
            </div>
            <!-- Form Actions -->
            <div class="d-flex justify-content-end gap-2">
              <a href="{% if object %}{% url 'items:detail' slug=campaign.slug item_id=object.id %}{% else %}{% url 'items:campaign_items' slug=campaign.slug %}{% endif %}"
                 class="btn btn-secondary">
                <i class="bi bi-x-circle"></i> Cancel
              </a>
              <button type="submit" class="btn btn-primary">
                <i class="bi bi-check-circle"></i> {{ form_action }} Item
              </button>
            </div>
          </form>
        </div>
      </div>
    </div>
  </div>
{% endblock %}
